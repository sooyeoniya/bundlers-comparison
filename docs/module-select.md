# 🎯 모듈 시스템 채택 방식

일반적으로 성능을 분석하는 경우, 테스트 환경을 최대한 단순하면서도 실용적인 비교가 되도록 설계하는 것이 중요하다. 이에 따라, 모듈 선택 과정에 있어서 장단점을 고려하여 정리해보았다.

## ✅ 테스트할 모듈 선택 기준

### 1️⃣ 하나의 공통 모듈로 통일할까?

✔ **장점**

- 번들러 간 성능 차이 명확히 비교 가능.
- 환경 차이로 인한 변수를 최소화할 수 있음.

✔ **단점**

- 번들러의 다양한 특성을 실험하기 어려움.
- 일부 번들러의 경우에는, 특정 모듈 유형에서 성능이 다르게 나타날 수 있음.

✔ **결론**

- 일단, 하나의 모듈로 통일하여 번들러 간 기본적인 성능 비교부터 진행하는 것이 좋을 듯.

### 2️⃣ 모듈을 여러 개로 하면 많이 복잡할까?

✔ **장점**

- 번들러 별로 어떤 유형의 모듈이 더 효율적인지 테스트해볼 수 있음.

✔ **단점**

- 테스트 환경과 결과 분석이 더 복잡해질 수 있음.
- 여러 개의 모듈을 사용할 경우, 번들러 자체의 성능 차이가 아닌 모듈별 차이 때문에 결과가 혼동될 수 있음.

✔ **결론**

- 우선 단일 모듈로 테스트 진행 후, 필요한 경우 2~3개의 모듈을 추가하여 테스트 진행하는 방식이 좋을 듯.

### 3️⃣ ESM(ES Module)을 사용하는 게 좋을까?

✔ **장점**

- 최근에는 CJS 보단 ESM이 기본이 되는 방향으로 전환 중임.
- 특히, Vite, Rollup, ESBuild 등은 ESM에 최적화되어 있음.
- CJS 변환 과정이 없는 만큼 번들러 자체 속도를 더 명확히 비교 가능함.

✔ **단점**

- Webpack과 SWC는 여전히 CJS와의 호환성을 고려하는 경우가 많음.
- 따라서, 일부 번들러는 ESM와 CJS에서 성능 차이가 날 수도 있음.

✔ **결론**

- 기본 모듈은 ESM으로 고정하되, Webpack과 SWC에서 ESM와 CJS의 차이에 따라 성능에 미치는 영향도 추가 테스트 가능함.

## ✅ 결론

- 우선 하나의 모듈, ESM을 사용해 기본 성능 비교할 것.
- 추가 테스트 진행하는 경우, 여러 모듈을 사용해 비교.
